#!/usr/bin/env bash

set -euo pipefail

WGX_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Hilfsfunktionen und Konfiguration laden
source "$WGX_DIR/lib/logging.bash"

# Befehlsauswahl basierend auf dem ersten Argument
if [[ $# -lt 1 ]]; then
    log_error "Kein Befehl angegeben. Verf√ºgbar: guard, smoke, metrics-snapshot"
    exit 1
fi

COMMAND="$1"
shift

case "$COMMAND" in
    metrics-snapshot)
        exec "$WGX_DIR/cmd/metrics-snapshot" "$@"
        ;;
    guard)
        exec "$WGX_DIR/cmd/guard" "$@"
        ;;
    smoke)
        exec "$WGX_DIR/cmd/smoke" "$@"
        ;;
    *)
        log_error "Unbekannter Befehl: $COMMAND"
        exit 1
        ;;
esac
